---
layout: post
status: publish
published: true
title: Testing Pyramid - A Case Study
author:
  display_name: Fabio Pereira
  login: admin
  email: fabiopereira.me@gmail.com
  url: http://fabiopereira.me
author_login: admin
author_email: fabiopereira.me@gmail.com
author_url: http://fabiopereira.me
wordpress_id: 487
wordpress_url: http://fabiopereira.me/blog/?p=487
date: '2012-03-05 23:28:18 +1100'
date_gmt: '2012-03-06 06:28:18 +1100'
categories:
- Technical
tags:
- TDD
- BDD
comments:
- id: 24719
  author: Jason Yip
  author_email: j.c.yip@computer.org
  author_url: http://jchyip.blogspot.com
  date: '2012-03-06 01:13:22 +1100'
  date_gmt: '2012-03-06 08:13:22 +1100'
  content: Are you maintaining this as a visual control?
- id: 24722
  author: Romain
  author_email: romain@nospam.com
  author_url: http://blog.cuttleworks.com
  date: '2012-03-06 01:47:44 +1100'
  date_gmt: '2012-03-06 08:47:44 +1100'
  content: '@Jason: on this project we only updated the pyramid manually a couple
    of times, but it''s a great idea for the next one. The diagram seems to carry
    the message pretty well so I can see the benefit in keeping it up to date - even
    maybe generating it from our CI server.'
- id: 24798
  author: Simon (@simon)
  author_email: sra@myob.com
  author_url: http://myob.com
  date: '2012-03-07 19:36:58 +1100'
  date_gmt: '2012-03-08 02:36:58 +1100'
  content: Love it. Do you have stats that could overlay coverage on each layer?
- id: 24805
  author: Fabio Pereira
  author_email: fabiopereira.me@gmail.com
  author_url: http://fabiopereira.me
  date: '2012-03-08 02:24:13 +1100'
  date_gmt: '2012-03-08 09:24:13 +1100'
  content: '@simon, we do keep coverage on Sonar, but not separately per layer, that''s
    a good idea tough.'
- id: 30944
  author: Nick Carroll
  author_email: nlcarroll@gmail.com
  author_url: http://nickcarroll.me
  date: '2012-06-11 20:36:43 +1000'
  date_gmt: '2012-06-12 03:36:43 +1000'
  content: Why does it take 13 minutes to run 12 functional tests?
- id: 30948
  author: Fabio Pereira
  author_email: fabiopereira.me@gmail.com
  author_url: http://fabiopereira.me
  date: '2012-06-11 22:33:25 +1000'
  date_gmt: '2012-06-12 05:33:25 +1000'
  content: <a href="#comment-30944" rel="nofollow">@Nick Carroll</a> The functional
    tests through the UI are very high level "User Journeys", so they are very full
    scenarios that take longer than one usual test. That's why they take longer...
- id: 43045
  author: John
  author_email: John@here.com
  author_url: ''
  date: '2012-11-19 14:30:23 +1100'
  date_gmt: '2012-11-19 21:30:23 +1100'
  content: I think the image could be a bit deceiving. Is there a possibility that
    the 12 UI tests could be equivalent to 5000 java unit tests? Normally UI test
    could touch on many areas of the product. I agree that it will be cheaper and
    less brittle but not sure about the above concern.
- id: 58665
  author: www.artoflatraille.com
  author_email: lpdhii@gmail.com
  author_url: http://www.artoflatraille.com/images/paintings/tsjqyj.asp
  date: '2013-06-07 08:21:32 +1000'
  date_gmt: '2013-06-07 15:21:32 +1000'
  content: Hello, just wanted to mention, I enjoyed this article. It was helpful.
    Keep on posting!
- id: 63523
  author: Fun run multiplayer race hack
  author_email: franchescabueno@inbox.com
  author_url: https://www.youtube.com/watch?v=OWilEgwGrLw
  date: '2013-08-10 11:32:39 +1000'
  date_gmt: '2013-08-10 18:32:39 +1000'
  content: "Woah! I'm really loving the template/theme of this site. It's simple,
    yet effective.\r\nA lot of times it's very hard to get that \"perfect balance\"
    between user friendliness and appearance. I must say you've done a awesome job
    with this.\r\nAlso, the blog loads extremely fast for me on Internet explorer.\r\nExceptional
    Blog!"
- id: 65921
  author: IMVU VIP Hack
  author_email: leolarasmussen@t-online.de
  author_url: http://www.youtube.com/watch?v=V_XGQtljYuo
  date: '2013-09-05 19:12:37 +1000'
  date_gmt: '2013-09-06 02:12:37 +1000'
  content: "Good information. Lucky me I discovered your site by accident (stumbleupon).\r\n\r\nI've
    saved as a favorite for later!"
- id: 96278
  author: Smurfs Village Hack Download
  author_email: lora.venable@gawab.com
  author_url: http://www.wellsphere.com/biking-article/smurfs-village-hack-cheats/2045143
  date: '2014-01-23 13:15:39 +1100'
  date_gmt: '2014-01-23 20:15:39 +1100'
  content: "I all the time emailed this blog post page to all my associates, because
    if like to read it after \r\nthat my friends will too."
- id: 99909
  author: pinterest.com
  author_email: erwingifford@freenet.de
  author_url: http://www.pinterest.com/pin/531635930984325375/
  date: '2014-02-09 04:20:13 +1100'
  date_gmt: '2014-02-09 11:20:13 +1100'
  content: "If some one needs to be updated with most recent technologies \r\ntherefore
    he must be go to see this web page and be up to date all the time."
- id: 100413
  author: Floy
  author_email: floy_jarnagin@fmailbox.com
  author_url: http://www.pinterest.com/pin/531635930984342530/
  date: '2014-02-11 01:00:37 +1100'
  date_gmt: '2014-02-11 08:00:37 +1100'
  content: "It's really very complex in this full of activity life to listen news
    on TV, thus I \r\nonly use internet for that reason, and obtain the latest news."
---
<p>Test automation is prevalent in the software development community. Practices like TDD and BDD are widespread and applied almost unquestionably. However, several organisations have struggled in attempting to scale automated test suites, which very often become slow, brittle, non-deterministic, unreliable and difficult to maintain.</p></p>
<p>One common issue reported by many teams and that I have also experienced many times is the&nbsp;<a href="http://blogs.agilefaqs.com/2011/02/01/inverting-the-testing-pyramid/">inverted testing pyramid</a>.</p></p>
<p>A year ago I joined a project that was going in that direction. I could see us making the same mistakes again. If we had kept going we would have ended up with the slow and hard to maintain, melting <a href="http://watirmelon.com/tag/software-testing-pyramid/">ice-cream cone</a>. However, this time we tried a different approach. Our test strategy was heavily based on the concept of <a href="http://fabiopereira.me/blog/2012/03/18/introducing-depth-of-test-dot/">Shallow Depth of Tests</a>, which means&nbsp;testing the code as close as possible to where it is written using preferably either unit or integration tests. We only automated high level test journeys at the UI level.</p></p>
<p>Now, one year later, we have a stable and fast build, which gives us an extremely high level of confidence.</p></p>
<p>Here is our project's&nbsp;<a href="http://jamescrisp.org/2011/05/30/automated-testing-and-the-test-pyramid/">testing pyramid</a>, of which we are very proud:</p></p>
<p><img title="Testing Pyramid Fabio Pereira.png" src="http://fabiopereira.me/blog/wp-content/uploads/2012/03/testing-pyramid-fabio-pereira.png" border="0" alt="Testing Pyramid Fabio Pereira" width="600" height="443" /></p></p>
<p>Some observations:</p></p>
<ul>
<li>Only 12 tests through the UI take 13 minutes to run</li>
<li>1748 unit tests take only 1 minute</li>
<li>273 JavaScript unit tests take less than 1 second. Treating <a href="http://fabiopereira.me/blog/2011/12/08/javascript-as-a-first-class-language/">JS as a 1st class language</a> helped us as well</li><br />
</ul></p>
<p>Feel free to share your testing pyramid as well. And always keep an eye on it&hellip; It can make a big difference to your project.</p></p>
<ul>
</ul></p>
