<!DOCTYPE html>
<html lang="en-us" class="no-js">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <link type="text/plain" rel="author" href="site url/humans.txt" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <!-- Optimized for search engines -->
  <meta name="description" content="DRY is a concept applied quite broadly in code. In a web application it's also important to extrapolate its use to the view layer (MVC) in order to increase ...">

  

  <link rel="canonical" href="site url/blog/2009/03/28/dry-your-view-using-refactor-and-conventions">

  
    <link rel="next" href="site url/blog/2009/04/18/keane-in-sydney" title="Keane in Sydney">
  

  
    <link rel="prev" href="site url/blog/2009/02/20/red-and-green-maven-build" title="Red and Green Maven Build">
  

  <!-- Twitter card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@fabiopereira">
  <meta name="twitter:creator" content="@fabiopereira">
  <meta name="twitter:title" content="Dry your view using refactor and conventions">
  <meta name="twitter:description" content="DRY is a concept applied quite broadly in code. In a web application it's also important to extrapolate its use to the view layer (MVC) in order to increase ...">
  <meta name="twitter:image" content="site url/your site icon path">
  <meta name="twitter:url" content="site url/blog/2009/03/28/dry-your-view-using-refactor-and-conventions">

  <!-- Open graph -->
  <meta property="og:title" content="Dry your view using refactor and conventions">
  <meta property="og:type" content="article">
  <meta property="og:url" content="site url/blog/2009/03/28/dry-your-view-using-refactor-and-conventions">
  <meta property="og:image" content="site url/your site icon path">
  <meta property="og:description" content="DRY is a concept applied quite broadly in code. In a web application it's also important to extrapolate its use to the view layer (MVC) in order to increase ...">
  <meta property="og:site_name" content="Fabio Pereira">
  <meta property="og:locale" content="your locale language">

  
    <meta property="article:modified_time" content="2009-03-28T14:46:07+00:00">
    <meta property="article:published_time" content="2009-03-28T14:46:07+00:00">
    <meta property="article:author" content="https://www.facebook.com/username">
    
      <meta property="og:see_also" content="site url/blog/2013/09/09/totiuorquiss">
    
      <meta property="og:see_also" content="site url/blog/2013/08/03/young-leaders-in-recife-and-us-assistant-secretary-of-state">
    
      <meta property="og:see_also" content="site url/blog/2013/02/21/follow-up-on-retrospective-actions">
    
  

  
    
    <meta property="article:section" content="technical">
    
  

  
    
    <meta property="article:tag" content="Agile">
    
    <meta property="article:tag" content="Java">
    
    <meta property="article:tag" content="Code">
    
  

  <meta property="fb:admins" content="your facebook profile id">
  <meta property="fb:app_id" content="your facebook app id">

  <title>
    
      Dry your view using refactor and conventions &middot; Go see, ask why, show respect
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css">

  

  <!-- Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Source+Serif+Pro:700,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Roboto:100,300' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=PT+Sans:700' rel='stylesheet' type='text/css'>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/images/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

  <!-- modernizer -->
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

  <!--[if lt IE 9]>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
  <![endif]-->

  <!--[if (gte IE 6)&(lte IE 8)]>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
  <![endif]-->
</head>


  <body>
    
      <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
      <nav role="navigation" class="sidebar sidebar--right">
  <a href="/" class="textLogo textLogo--white textLogo--sidebar">Fabio Pereira</a>
  <ul class="sidebar-recentPosts">
    
      
      <li>
        
          <a href="/blog/2013/09/09/totiuorquiss" class="sidebar-recentPosts-image-wrapper">
            <img src="/assets/images/thumbnail/totiuorquiss.png" style="" alt="">
          </a>
        
        <a href="/blog/2013/09/09/totiuorquiss">T&oacute;tiUorquiss</a>
        <div class="postMeta">09 Sep 2013</div>
      </li>
      
    
      
      <li>
        
          <a href="/blog/2013/08/03/young-leaders-in-recife-and-us-assistant-secretary-of-state" class="sidebar-recentPosts-image-wrapper">
            <img src="/assets/images/thumbnail/young-leaders-in-recife-and-us-assistant-secretary-of-state.jpg" style="" alt="">
          </a>
        
        <a href="/blog/2013/08/03/young-leaders-in-recife-and-us-assistant-secretary-of-state">Young Leaders in Recife and US Assistant Secretary of State</a>
        <div class="postMeta">03 Aug 2013</div>
      </li>
      
    
      
      <li>
        
          <a href="/blog/2013/02/21/follow-up-on-retrospective-actions" class="sidebar-recentPosts-image-wrapper">
            <img src="/assets/images/thumbnail/follow-up-on-retrospective-actions.jpg" style="" alt="">
          </a>
        
        <a href="/blog/2013/02/21/follow-up-on-retrospective-actions">Follow Up on Retrospective Actions </a>
        <div class="postMeta">21 Feb 2013</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2013/02/13/rss-recife-summer-school">RSS Recife Summer School</a>
        <div class="postMeta">13 Feb 2013</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2012/03/18/introducing-depth-of-test-dot">Introducing Depth of Test (DOT)</a>
        <div class="postMeta">18 Mar 2012</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2012/03/05/testing-pyramid-a-case-study">Testing Pyramid - A Case Study</a>
        <div class="postMeta">05 Mar 2012</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2012/02/04/speaking-at-qcon-beijing">Speaking at QCon Beijing</a>
        <div class="postMeta">04 Feb 2012</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2011/12/07/javascript-as-a-first-class-language">JavaScript as a First Class Language</a>
        <div class="postMeta">07 Dec 2011</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2011/11/07/my-echidna-photo-was-selected">My Echidna photo was selected</a>
        <div class="postMeta">07 Nov 2011</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2011/10/24/thoughtworks-brazil-in-joo-pessoa">ThoughtWorks Brazil in Jo&atilde;o Pessoa</a>
        <div class="postMeta">24 Oct 2011</div>
      </li>
      
    
  </ul>
</nav>

      <nav class="menuWrapper">
  <ul class="popover popover--menu">
    <li class="menu-avatar">
      <a href="/" class="brandLogo brandLogo--small
      
      ">Fabio Pereira</a>
      <ul class="list list--avatarMenu hidden">
        <li class="list-item"><a href="">Twitter</a></li>
        <li class="list-item"><a href="">LinkedIn</a></li>
        <li class="list-item"><a href="">Quora</a></li>
        <li class="list-item"><a href="">Dribbble</a></li>
        <li class="list-item"><a href="">Kiva</a></li>
      </ul>
    </li>
  </ul>
</nav>

    

    <article class="postWrapper">
  <section class="section--first is-darkBackgrounded u-table">
    <div class="section-backgroundImage">

      

    </div>
    <div class="section-gradient
    
    "></div>
    <div class="section-title is-darkBackgrounded u-tableCell u-verticalAlignMiddle">
      <div class="container">
        <h2>Dry your view using refactor and conventions</h2>
        <div class="postMeta-wrapper">
          <ul class="postMeta">
            <li class="postMeta-datetime">
              <time datetime="2009-03-28 14:46:07 +0000">
                28 Mar 2009
              </time>
            </li>
            <li class="postMeta-author">
              By Fabio Pereira
            </li>
            <li class="postMeta-tags">
              technical
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section class="section--last">
    <div class="container container--content">
      <div class="content-body">

        <p><a target="blank" href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> is a concept applied quite broadly in code. In a web application it's also important to extrapolate its use to the <a target="blank" href="http://en.wikipedia.org/wiki/Model-view-controller">view</a> layer (<a target="blank" href="http://en.wikipedia.org/wiki/Model-view-controller">MVC</a>) in order to increase clarity and consistency. </p>
<p>At the end of this post I'll explain how a user story that had to be delivered became much easier to implement because we had a <a target="blank" href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">dry</a> and <a target="blank" href="http://www.refactoring.com">refactored</a> view.</p>
<div style="text-align:center;"><img src="http://fabiopereira.me/postfiles/DryYourView/images/PleaseDryMyView.png" alt="Image" border="0"/></div></p>
<p><strong>Concrete example of a view pattern being refactored and dryed</strong></p>
<p>As I usually try to explain things by example, I'll show a <a target="blank" href="http://java.sun.com/products/jsp/">JSP</a> that can be <a target="blank" href="http://www.refactoring.com/">refactored</a> and dried. Please notice that the idea of <strong>refactoring and drying your view using conventions is technology agnostic</strong> and can be achieved with other languages and frameworks as well.</p>
<p>Let's say we have to implement this form:</p>
<div style="text-align:center;"><img src="http://fabiopereira.me/postfiles/DryYourView/images/FormEmpty.png" alt="Image" border="0"/></div></p>
<p>The example below shows one way of implementing the aforementioned form using <a target="blank" href="http://static.springframework.org/spring/docs/2.0.x/reference/mvc.html">Spring MVC</a> JSP tags.</p>
<div style="text-align:center;"><img src="http://fabiopereira.me/postfiles/DryYourView/images/StepByStepLarge.png" alt="Image" border="0"/></div></p>
<p>The convention used was that the default label will be <strong>label.${id}</strong>.</p>
<p><strong>Tag Files and Conventions</strong><br />
If you want to know how to create your own <a target="blank" href="http://articles.techrepublic.com.com/5100-10878_11-5215024.html">JSP 2.0 tag file</a>, like the one created above (form-ext:inputText), <a target="blank" href="http://articles.techrepublic.com.com/5100-10878_11-5215024.html">here are</a> <a target="blank" href="http://www.onjava.com/pub/a/onjava/excerpt/jserverpages3_ch11/index.html">a few</a> <a target="blank" href="http://www.oracle.com/technology/pub/articles/cioroianu_tagfiles.html">tutorials</a>.<br />
But always remember about the <a target="blank" href="http://en.wikipedia.org/wiki/Convention_over_Configuration">conventions over configurations</a>. </p>
<p>Here is the file that was used to implement form-ext:inputText:</p>
<p>You can download it if you want: <a target="blank" href="http://fabiopereira.me/postfiles/DryYourView/inputText.tag">inputText.tag</a></p>
<div style="text-align:center;"><img src="http://fabiopereira.me/postfiles/DryYourView/images/InputTextTag.png" alt="Image" border="0"/></div></p>
<p>If the user of the tag (inputText.tag) still wants to send the parameters <strong>label, size and maxlength</strong>, they would be able to do so. They are not required and have default values, though. </p>
<p>Basically if you apply these two concepts (Tag Files and Conventions) you can dry your JSP's... But you have to identify the duplication patterns.</p>
<div style="text-align:center;"><img src="http://fabiopereira.me/postfiles/DryYourView/images/JSPDryer.png" alt="Image" border="0"/></div></p>
<p><strong>Extract Tag File - A view refactor similar to <a target="blank" href="http://www.refactoring.com/catalog/extractMethod.html">Extract Method</a></strong></p>
<p>What was shown above is a step by step of a refactor that I call <strong>Extract Tag File</strong>. It's quite similar to extracting a method, but instead of code, we have JSP.<br />
I wish the IDEs had this refactor implemented ... Who knows someday... Or maybe we could write a plug-in for <a target="blank" href="http://www.eclipse.org/">Eclipse</a> or <a target="blank" href="http://www.jetbrains.com/idea/">IntelliJ</a>.</p>
<p><strong>How we applied this on a real project to deliver business value quickly</strong></p>
<p>Recently, on my current project, we had to change the way the error messages were shown to the user. They had to be field context aware, which means that if there was an error related to the field "Given Name", the error message had to be show next to the field. </p>
<p><strong>This is what we had before:</strong></p>
<div style="text-align:center;"><img src="http://fabiopereira.me/postfiles/DryYourView/images/FormErrorOnTop.png" alt="Image" border="0"/></div></p>
<p><strong>This is what we had to implement:</strong></p>
<div style="text-align:center;"><img src="http://fabiopereira.me/postfiles/DryYourView/images/FormErrorNextToFields.png" alt="Image" border="0"/></div></p>
<p>Can you imagine how much easier it was just because we had our DRY VIEW? Our fields were wrapped and, therefore, it was just a matter of implementing this inside the tag file... <br /><br />
<br /></p>
<p>That's what we aim... Deliver business value quickly!!! Happy client... Happy developers...</p>


      </div>
    </div>
    <hr class="u-clearHr"/>
    <hr class="u-clearHr"/>
    <hr/>
    <div class="container container--content">
      <div class="content-body">
        
        <div class="content-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES * * */
      var disqus_shortname = 'disqus_shortname';

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>

      </div>
    </div>
  </section>
  <footer class="postFooter">
    
      <section class="section--prePost is-darkBackgrounded u-table">
        <div class="section-backgroundImage section-backgroundImage--previousPage">
          <img class="post-featuredImage"
          
          style="top:0" alt="">
        </div>
        <div class="section-gradient
        
        "></div>
        <div class="section-title u-tableCell u-verticalAlignMiddle">
          <div class="container">
            <h4>Next story:</h4>
            <a class="prev" href="/blog/2009/02/20/red-and-green-maven-build">
              <h2>Red and Green Maven Build</h2>
            </a>
          </div>
        </div>
      </section>
    
  </footer>
</article>

<div class="modal-toggle-group animate scaleIn">
  <div class="modal-toggle-bubbleShadow"></div>
  <div class="modal-toggle-bubble"></div>
  <div class="modal-toggle-wrapper"></div>
  <div class="modal-toggle-close-wrapper">
    <div class="modal-toggle-close"></div>
  </div>
</div>

<div class="fullscreenModal u-table">
  <div class="u-tableCell u-verticalAlignMiddle">
    <h2 class="h2--shareTitle">Share this story</h2>
    <ul class="shareWrapper">
      <li><a class="shareButton shareButton--twitter" href="https://twitter.com/intent/tweet?text=Dry your view using refactor and conventions by @VincentChan&url=site%20url%2Fblog%2F2009%2F03%2F28%2Fdry-your-view-using-refactor-and-conventions" target="_blank"></a></li>
      <li><a class="shareButton shareButton--facebook" href="https://www.facebook.com/sharer/sharer.php?u=site%20url%2Fblog%2F2009%2F03%2F28%2Fdry-your-view-using-refactor-and-conventions" target="_blank"></a></li>
      <li><a class="shareButton shareButton--linkedin" href="https://www.linkedin.com/shareArticle
?mini=true&url=site%20url%2Fblog%2F2009%2F03%2F28%2Fdry-your-view-using-refactor-and-conventions&title=Dry your view using refactor and conventions"  target="_blank"></a></li>
      <li><a class="shareButton shareButton--buffer" href="https://buffer.com/add?text=Dry your view using refactor and conventions by @VincentChan&url=site%20url%2Fblog%2F2009%2F03%2F28%2Fdry-your-view-using-refactor-and-conventions" target="_blank"></a></li>
      <li><a class="shareButton shareButton--hackernews" href="http://news.ycombinator.com/submitlink?u=site%20url%2Fblog%2F2009%2F03%2F28%2Fdry-your-view-using-refactor-and-conventions&t=Dry your view using refactor and conventions" target="_blank"></a></li>
      <li><a class="shareButton shareButton--pocket" href="https://getpocket.com/save?url=site%20url%2Fblog%2F2009%2F03%2F28%2Fdry-your-view-using-refactor-and-conventions&title=Dry your view using refactor and conventions" target="_blank"></a></li>
    </ul>
  </div>
</div>



    
      <label for="sidebar-checkbox" class="sidebar-toggle-wrapper">
  <div class="sidebar-toggle"></div>
</label>

    

    

    <!-- Javascript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="/assets/javascripts/imagesloaded.pkgd.min.js"></script>



<script>
  $(document).ready(function(){

    // Featured image loaded behavior
    $('.section-backgroundImage img').imagesLoaded()
      .done( function( instance ) {
        $('.post-featuredImage').addClass('is-loaded');
      });

    // Modal toggle behavior
    $('.modal-toggle-wrapper').click(function() {
    	$(this).toggleClass('active');
      $('.modal-toggle-bubble').toggleClass('active');
    	$('.modal-toggle-bubbleShadow').toggleClass('active');
      $('.modal-toggle-close-wrapper').toggleClass('active');
      $('.fullscreenModal').toggleClass('active');
    });

    // Prevent default anchor event and make a share popup
    $.fn.sharePopup = function (e, intWidth, intHeight, blnResize) {

      e.preventDefault();
      intWidth = intWidth || '750';
      intHeight = intHeight || '500';
      strResize = (blnResize ? 'yes' : 'no');

      //// Set title and open popup with focus on it
      var strTitle = ((typeof this.attr('title') !== 'undefined') ? this.attr('title') : 'Social Share'),
          strParam = 'width=' + intWidth + ',height=' + intHeight + ',resizable=' + strResize,
          objWindow = window.open(this.attr('href'), strTitle, strParam).focus();
    }

    $('.shareButton').on("click", function(e) {
      $(this).sharePopup(e);
    });
  });

  // Show modal toggle after scrolling 300px
  $(document).scroll(function() {
    $('.modal-toggle-group').toggleClass('active', $(document).scrollTop() >= 300);
  });
</script>

  </body>
</html>
