<!DOCTYPE html>
<html lang="en-us" class="no-js">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <link type="text/plain" rel="author" href="site url/humans.txt" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <!-- Optimized for search engines -->
  <meta name="description" content="For the last couple of years I have been particularly passionate and vocal on&nbsp;my projects and in the community about the importance of writing tests as ...">

  

  <link rel="canonical" href="site url/blog/2012/03/18/introducing-depth-of-test-dot">

  
    <link rel="next" href="site url/blog/2013/02/13/rss-recife-summer-school" title="RSS Recife Summer School">
  

  
    <link rel="prev" href="site url/blog/2012/03/05/testing-pyramid-a-case-study" title="Testing Pyramid - A Case Study">
  

  <!-- Twitter card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@fabiopereira">
  <meta name="twitter:creator" content="@fabiopereira">
  <meta name="twitter:title" content="Introducing Depth of Test (DOT)">
  <meta name="twitter:description" content="For the last couple of years I have been particularly passionate and vocal on&nbsp;my projects and in the community about the importance of writing tests as ...">
  <meta name="twitter:image" content="site url/your site icon path">
  <meta name="twitter:url" content="site url/blog/2012/03/18/introducing-depth-of-test-dot">

  <!-- Open graph -->
  <meta property="og:title" content="Introducing Depth of Test (DOT)">
  <meta property="og:type" content="article">
  <meta property="og:url" content="site url/blog/2012/03/18/introducing-depth-of-test-dot">
  <meta property="og:image" content="site url/your site icon path">
  <meta property="og:description" content="For the last couple of years I have been particularly passionate and vocal on&nbsp;my projects and in the community about the importance of writing tests as ...">
  <meta property="og:site_name" content="Fabio Pereira">
  <meta property="og:locale" content="your locale language">

  
    <meta property="article:modified_time" content="2012-03-18T06:57:22+00:00">
    <meta property="article:published_time" content="2012-03-18T06:57:22+00:00">
    <meta property="article:author" content="https://www.facebook.com/username">
    
      <meta property="og:see_also" content="site url/blog/2013/09/09/totiuorquiss">
    
      <meta property="og:see_also" content="site url/blog/2013/08/03/young-leaders-in-recife-and-us-assistant-secretary-of-state">
    
      <meta property="og:see_also" content="site url/blog/2013/02/21/follow-up-on-retrospective-actions">
    
  

  
    
    <meta property="article:section" content="technical">
    
  

  
    
    <meta property="article:tag" content="ThoughtWorks">
    
    <meta property="article:tag" content="TDD">
    
    <meta property="article:tag" content="BDD">
    
    <meta property="article:tag" content="Metaphor">
    
  

  <meta property="fb:admins" content="your facebook profile id">
  <meta property="fb:app_id" content="your facebook app id">

  <title>
    
      Introducing Depth of Test (DOT) &middot; Go see, ask why, show respect
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css">

  

  <!-- Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Source+Serif+Pro:700,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Roboto:100,300' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=PT+Sans:700' rel='stylesheet' type='text/css'>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/images/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

  <!-- modernizer -->
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

  <!--[if lt IE 9]>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
  <![endif]-->

  <!--[if (gte IE 6)&(lte IE 8)]>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
  <![endif]-->
</head>


  <body>
    
      <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
      <nav role="navigation" class="sidebar sidebar--right">
  <a href="/" class="textLogo textLogo--white textLogo--sidebar">Fabio Pereira</a>
  <ul class="sidebar-recentPosts">
    
      
      <li>
        
          <a href="/blog/2013/09/09/totiuorquiss" class="sidebar-recentPosts-image-wrapper">
            <img src="/assets/images/thumbnail/totiuorquiss.png" style="" alt="">
          </a>
        
        <a href="/blog/2013/09/09/totiuorquiss">T&oacute;tiUorquiss</a>
        <div class="postMeta">09 Sep 2013</div>
      </li>
      
    
      
      <li>
        
          <a href="/blog/2013/08/03/young-leaders-in-recife-and-us-assistant-secretary-of-state" class="sidebar-recentPosts-image-wrapper">
            <img src="/assets/images/thumbnail/young-leaders-in-recife-and-us-assistant-secretary-of-state.jpg" style="" alt="">
          </a>
        
        <a href="/blog/2013/08/03/young-leaders-in-recife-and-us-assistant-secretary-of-state">Young Leaders in Recife and US Assistant Secretary of State</a>
        <div class="postMeta">03 Aug 2013</div>
      </li>
      
    
      
      <li>
        
          <a href="/blog/2013/02/21/follow-up-on-retrospective-actions" class="sidebar-recentPosts-image-wrapper">
            <img src="/assets/images/thumbnail/follow-up-on-retrospective-actions.jpg" style="" alt="">
          </a>
        
        <a href="/blog/2013/02/21/follow-up-on-retrospective-actions">Follow Up on Retrospective Actions </a>
        <div class="postMeta">21 Feb 2013</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2013/02/13/rss-recife-summer-school">RSS Recife Summer School</a>
        <div class="postMeta">13 Feb 2013</div>
      </li>
      
    
      
        <!-- exclude current post -->
      
    
      
      <li>
        
        <a href="/blog/2012/03/05/testing-pyramid-a-case-study">Testing Pyramid - A Case Study</a>
        <div class="postMeta">05 Mar 2012</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2012/02/04/speaking-at-qcon-beijing">Speaking at QCon Beijing</a>
        <div class="postMeta">04 Feb 2012</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2011/12/07/javascript-as-a-first-class-language">JavaScript as a First Class Language</a>
        <div class="postMeta">07 Dec 2011</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2011/11/07/my-echidna-photo-was-selected">My Echidna photo was selected</a>
        <div class="postMeta">07 Nov 2011</div>
      </li>
      
    
      
      <li>
        
        <a href="/blog/2011/10/24/thoughtworks-brazil-in-joo-pessoa">ThoughtWorks Brazil in Jo&atilde;o Pessoa</a>
        <div class="postMeta">24 Oct 2011</div>
      </li>
      
    
  </ul>
</nav>

      <nav class="menuWrapper">
  <ul class="popover popover--menu">
    <li class="menu-avatar">
      <a href="/" class="brandLogo brandLogo--small
      
      ">Fabio Pereira</a>
      <ul class="list list--avatarMenu hidden">
        <li class="list-item"><a href="">Twitter</a></li>
        <li class="list-item"><a href="">LinkedIn</a></li>
        <li class="list-item"><a href="">Quora</a></li>
        <li class="list-item"><a href="">Dribbble</a></li>
        <li class="list-item"><a href="">Kiva</a></li>
      </ul>
    </li>
  </ul>
</nav>

    

    <article class="postWrapper">
  <section class="section--first is-darkBackgrounded u-table">
    <div class="section-backgroundImage">

      

    </div>
    <div class="section-gradient
    
    "></div>
    <div class="section-title is-darkBackgrounded u-tableCell u-verticalAlignMiddle">
      <div class="container">
        <h2>Introducing Depth of Test (DOT)</h2>
        <div class="postMeta-wrapper">
          <ul class="postMeta">
            <li class="postMeta-datetime">
              <time datetime="2012-03-18 06:57:22 +0000">
                18 Mar 2012
              </time>
            </li>
            <li class="postMeta-author">
              By Fabio Pereira
            </li>
            <li class="postMeta-tags">
              technical
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section class="section--last">
    <div class="container container--content">
      <div class="content-body">

        <p>For the last couple of years I have been particularly passionate and vocal on&nbsp;<a href="http://fabiopereira.me/blog/2012/03/05/testing-pyramid-a-case-study/">my projects</a> and <a href="http://www.slideshare.net/fabiopereirame/shallow-depth-of-test-test-at-the-appropriate-level">in the</a> <a href="http://fabiopereira.me/blog/2012/02/05/speaking-at-qcon-beijing/">community</a> about the importance of writing tests as close as possible to where the code is written. As a result I have been achieving easier and cheaper to maintain <a href="http://fabiopereira.me/blog/2012/03/05/testing-pyramid-a-case-study/">testing pyramids</a> as opposed to expensive and brittle <a href="http://watirmelon.com/2012/01/31/introducing-the-software-testing-ice-cream-cone/">ice-cream cones</a>. My passion stems from all the times that I saw, and wrote myself, test suites which attempted to achieve most of the high level scenario coverage through the user interface.&nbsp;I was one of the passionate advocates of this technique during a <a href="thoughtworks.com/radar">ThoughtWorks Technology Radar</a> session where we collected new ideas. Now I&nbsp;am quite satisfied to see that the technique has recently been added to the <strong>adopt</strong> section&nbsp;of the <a href="thoughtworks.com/radar">latest radar</a>.</p></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="ThoughtWorks Radar.png" src="http://fabiopereira.me/blog/wp-content/uploads/2012/03/thoughtworks-radar.png" border="0" alt="ThoughtWorks Radar" width="480" height="414" /></p></p>
<p>&nbsp;</p></p>
<p><strong>Testing at the appropriate level</strong></p></p>
<p><em>"The advent of BDD, testing&nbsp;frameworks like Cucumber, combined with browser&nbsp;automation tools like Selenium, has encouraged&nbsp;widespread use of acceptance testing at the browser level.&nbsp;This unfortunately encouraged doing the bulk of testing&nbsp;where the cost to run the tests is the greatest. Instead,&nbsp;we should <strong>test at the appropriate level</strong>, <strong>as close to the&nbsp;code as possible</strong>, so that tests can be run with maximum&nbsp;efficiency. Browser-level tests should be the icing on the&nbsp;cake, supported by acceptance and unit tests executed&nbsp;at appropriate layers"</em></p></p>
<div style="text-align: right;"><em><a href="http://thoughtworks.fileburst.com/assets/thoughtworks-tech-radar-march-2012-us-color.pdf">thoughtworks.com/radar</a></em></div></p>
<p><strong>Shallow Depth of Test</strong></p></p>
<p>I believe that neologistic metaphors, like Ward Cunningham's&nbsp;<a href="http://en.wikipedia.org/wiki/Technical_debt">Technical Debt</a>,&nbsp;are extremely effective to explain concepts like this. I will explain a real world example and eventually I'll get to my neologism: <strong>Shallow Depth of Tests.</strong></p></p>
<p>Let's say, hypothetically, as if I had never worked on one of these, that we have to implement a quote web application that has several business rule validations and if the details provided are valid, it gives the user a price. From the user's perspective, the app is pretty much like this:</p></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="DOT Depth of Test Black Box System.png" src="http://fabiopereira.me/blog/wp-content/uploads/2012/03/dot-depth-of-test-black-box-system.png" border="0" alt="DOT Depth of Test Black Box System" width="420" height="331" /></p></p>
<p>&nbsp;</p></p>
<p>Let's keep in mind that we want to avoid testing this system as a black box, so let's break it down and understand what's inside. The system's architecture is explained in more detailed in the image below:</p></p>
<ul>
<li><strong><span style="color: #ff6900;">Javascript layer</span></strong> communicating to server side using JSON services</li>
<li><strong><span style="color: #2c00b8;">Controller and mandatory validator</span></strong></li>
<li><strong><span style="color: #68bb20;">Domain model, business rules and pricing calculator</span></strong></li>
<li><strong><span style="color: #a855b6;">Data storage</span></strong></li><br />
</ul></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="DOT Depth of Test Architecture.png" src="http://fabiopereira.me/blog/wp-content/uploads/2012/03/dot-depth-of-test-architecture.png" border="0" alt="DOT Depth of Test Architecture" width="480" height="354" /></p></p>
<ul>
</ul></p>
<p>The <strong>pricing calculator</strong> is a crucial component of this system. It has to be thoroughly tested in order to make sure that it provides the right price for several scenarios.If we decide to test pricing through the user interface, using a tool like <a href="http://code.google.com/p/selenium/">WebDriver/Selenium</a>, or any other tool that drives a browser the image below shows all the components that will be visited by these tests, I call these components <strong><span style="color: #ae0000;"><em>on focus</em></span>.</strong></p></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="DOT Depth of Test Test Flow.png" src="http://fabiopereira.me/blog/wp-content/uploads/2012/03/dot-depth-of-test-test-flow.png" border="0" alt="DOT Depth of Test Test Flow" width="480" height="358" /></p></p>
<p>For pricing, there are several scenarios, maybe tens, sometimes hundreds of different combinations of factors that might affect the amount to be paid. This means that we will be <strong>visiting</strong> those components many times when all we are testing is the pricing calculator. In other words, everything will be <strong>on focus</strong>, when all we want to be focused is the pricing calculator component.</p></p>
<p>Here is when I start my neologistic metaphor&hellip; In optics, particularly in film and photography, there is the concept of <strong>depth of field:</strong></p></p>
<p style="text-align: center;"><em>"<strong>Depth of Field (DOF)</strong> is the distance between the nearest and farthest objects in a scene that appear acceptably sharp in an image."</em></p></p>
<p style="text-align: right;"><em><a href="http://en.wikipedia.org/wiki/Depth_of_field">wikipedia</a></em></p></p>
<p><a href="http://en.wikipedia.org/wiki/Depth_of_field"><img style="display: block; margin-left: auto; margin-right: auto;" title="440px-Depth_of_field_diagram.png" src="http://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Depth_of_field_diagram.png/440px-Depth_of_field_diagram.png" border="0" alt="440px-Depth_of_field_diagram.png" /></a></p></p>
<p>Therefore, adapting this definition to software testing:</p></p>
<p style="text-align: center;"><em>"<strong>Depth of Test (DOT)</strong> is the distance between the nearest and farthest software components that get visited during the execution of a test."</em></p></p>
<p>It is important to point out that the definition mentions a "<strong><em>software component</em></strong>", which is not necessarily one "<em>class</em>" (<a href="http://en.wikipedia.org/wiki/Object-oriented_programming">OOP</a>), or one "<em>function"</em> (<a href="http://en.wikipedia.org/wiki/Functional_programming">FP</a>). Components are logical entities that performs a small feature of the system. It could be an entire pricing calculator, a business rule validator or a simple string concatenation function. Each system will have its own components with various sizes.</p></p>
<p>Having defined that, if we want to test the pricing calculator mentioned above, we should keep it on focus and test it at a different level, not through the user interface, in this case a browser. If we do that, we will end up having a <strong>Shallow Depth of Test. </strong></p></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="DOT Depth of Test Shallow.png" src="http://fabiopereira.me/blog/wp-content/uploads/2012/03/dot-depth-of-test-shallow.png" border="0" alt="DOT Depth of Test Shallow" width="480" height="358" /></p></p>
<p>What I have learned and observed is that the more shallow the depth of tests, the cheaper is it to maintain and also the faster it is to execute them.</p></p>


      </div>
    </div>
    <hr class="u-clearHr"/>
    <hr class="u-clearHr"/>
    <hr/>
    <div class="container container--content">
      <div class="content-body">
        
        <div class="content-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES * * */
      var disqus_shortname = 'disqus_shortname';

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>

      </div>
    </div>
  </section>
  <footer class="postFooter">
    
      <section class="section--prePost is-darkBackgrounded u-table">
        <div class="section-backgroundImage section-backgroundImage--previousPage">
          <img class="post-featuredImage"
          
          style="top:0" alt="">
        </div>
        <div class="section-gradient
        
        "></div>
        <div class="section-title u-tableCell u-verticalAlignMiddle">
          <div class="container">
            <h4>Next story:</h4>
            <a class="prev" href="/blog/2012/03/05/testing-pyramid-a-case-study">
              <h2>Testing Pyramid - A Case Study</h2>
            </a>
          </div>
        </div>
      </section>
    
  </footer>
</article>

<div class="modal-toggle-group animate scaleIn">
  <div class="modal-toggle-bubbleShadow"></div>
  <div class="modal-toggle-bubble"></div>
  <div class="modal-toggle-wrapper"></div>
  <div class="modal-toggle-close-wrapper">
    <div class="modal-toggle-close"></div>
  </div>
</div>

<div class="fullscreenModal u-table">
  <div class="u-tableCell u-verticalAlignMiddle">
    <h2 class="h2--shareTitle">Share this story</h2>
    <ul class="shareWrapper">
      <li><a class="shareButton shareButton--twitter" href="https://twitter.com/intent/tweet?text=Introducing Depth of Test (DOT) by @VincentChan&url=site%20url%2Fblog%2F2012%2F03%2F18%2Fintroducing-depth-of-test-dot" target="_blank"></a></li>
      <li><a class="shareButton shareButton--facebook" href="https://www.facebook.com/sharer/sharer.php?u=site%20url%2Fblog%2F2012%2F03%2F18%2Fintroducing-depth-of-test-dot" target="_blank"></a></li>
      <li><a class="shareButton shareButton--linkedin" href="https://www.linkedin.com/shareArticle
?mini=true&url=site%20url%2Fblog%2F2012%2F03%2F18%2Fintroducing-depth-of-test-dot&title=Introducing Depth of Test (DOT)"  target="_blank"></a></li>
      <li><a class="shareButton shareButton--buffer" href="https://buffer.com/add?text=Introducing Depth of Test (DOT) by @VincentChan&url=site%20url%2Fblog%2F2012%2F03%2F18%2Fintroducing-depth-of-test-dot" target="_blank"></a></li>
      <li><a class="shareButton shareButton--hackernews" href="http://news.ycombinator.com/submitlink?u=site%20url%2Fblog%2F2012%2F03%2F18%2Fintroducing-depth-of-test-dot&t=Introducing Depth of Test (DOT)" target="_blank"></a></li>
      <li><a class="shareButton shareButton--pocket" href="https://getpocket.com/save?url=site%20url%2Fblog%2F2012%2F03%2F18%2Fintroducing-depth-of-test-dot&title=Introducing Depth of Test (DOT)" target="_blank"></a></li>
    </ul>
  </div>
</div>



    
      <label for="sidebar-checkbox" class="sidebar-toggle-wrapper">
  <div class="sidebar-toggle"></div>
</label>

    

    

    <!-- Javascript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="/assets/javascripts/imagesloaded.pkgd.min.js"></script>



<script>
  $(document).ready(function(){

    // Featured image loaded behavior
    $('.section-backgroundImage img').imagesLoaded()
      .done( function( instance ) {
        $('.post-featuredImage').addClass('is-loaded');
      });

    // Modal toggle behavior
    $('.modal-toggle-wrapper').click(function() {
    	$(this).toggleClass('active');
      $('.modal-toggle-bubble').toggleClass('active');
    	$('.modal-toggle-bubbleShadow').toggleClass('active');
      $('.modal-toggle-close-wrapper').toggleClass('active');
      $('.fullscreenModal').toggleClass('active');
    });

    // Prevent default anchor event and make a share popup
    $.fn.sharePopup = function (e, intWidth, intHeight, blnResize) {

      e.preventDefault();
      intWidth = intWidth || '750';
      intHeight = intHeight || '500';
      strResize = (blnResize ? 'yes' : 'no');

      //// Set title and open popup with focus on it
      var strTitle = ((typeof this.attr('title') !== 'undefined') ? this.attr('title') : 'Social Share'),
          strParam = 'width=' + intWidth + ',height=' + intHeight + ',resizable=' + strResize,
          objWindow = window.open(this.attr('href'), strTitle, strParam).focus();
    }

    $('.shareButton').on("click", function(e) {
      $(this).sharePopup(e);
    });
  });

  // Show modal toggle after scrolling 300px
  $(document).scroll(function() {
    $('.modal-toggle-group').toggleClass('active', $(document).scrollTop() >= 300);
  });
</script>

  </body>
</html>
